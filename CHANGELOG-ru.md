# История изменений

## [Unreleased]

## [0.2.0] - 2025-10-14

### Добавлено

- **Управление вложениями** - Полная поддержка работы с файловыми вложениями в задачах:
  - `issue_attachments_list`: Получение списка всех вложений задачи с метаданными
  - `issue_attachment_get`: Получение детальной информации о конкретном вложении
  - `issue_attachment_download`: Получение подписанного URL для скачивания (без авторизации)
  - `issue_attachment_upload`: Загрузка нескольких файлов в задачу (макс. 10 файлов за запрос)
  - `issue_attachment_delete`: Удаление вложения с обязательным параметром подтверждения
- Форматирование размера файлов в ответах по вложениям (например, "1.2 MB", "120.6 KB")
- Механизм безопасности для деструктивных операций:
  - Удаление вложения требует явного параметра `confirmation: true`
  - Понятные сообщения об ошибках при отсутствии или false в подтверждении
  - Имя файла включено в ответ удаления для проверки
- Валидация файлов перед загрузкой (проверка существования файла на локальной файловой системе)
- Поддержка отключения уведомлений об обновлении при загрузке вложений

- Поддержка форматирования Markdown через параметр `usesMarkdown` в инструментах для задач:
  - `issue_create`: Создание задач с описанием в формате Markdown
  - `issue_update`: Обновление задач с описанием в формате Markdown
  - `issue_comment_create`: Добавление комментариев с форматированием Markdown
- Поддержка форматирования Markdown через параметр `usesMarkdown` в инструментах для трудозатрат:
  - `workitem_create`: Создание записей трудозатрат с описанием в формате Markdown
  - `workitem_create_idempotent`: Создание записей без дублей с поддержкой Markdown
  - `workitem_update`: Обновление записей трудозатрат с описанием в формате Markdown
  - `workitems_create_period`: Массовое создание записей трудозатрат с форматированием Markdown
- Поддержка форматирования Markdown через параметр `usesMarkdown` в инструментах для статей:
  - `article_create`: Создание статей с контентом в формате Markdown
  - `article_update`: Обновление статей с контентом в формате Markdown
- Поддержка предпросмотра отрендеренного контента через параметр `returnRendered` в инструментах для статей:
  - `article_create`: Получение отрендеренного предпросмотра при создании статей
  - `article_update`: Получение отрендеренного предпросмотра при обновлении статей
  - `article_search`: Получение отрендеренного предпросмотра в результатах поиска
- Новые поля в ответах для улучшенного представления контента:
  - Поля `wikifiedDescription` и `usesMarkdown` в ответах инструментов для задач
  - Поля `textPreview` и `usesMarkdown` в ответах инструментов для комментариев
  - Поля `contentPreview` и `usesMarkdown` в ответах инструментов для статей
- Расширенные рекомендации для разработчиков в AGENTS.md:
  - Требования к подробным описаниям MCP инструментов с подсказками по использованию
  - Требования к pagination во всех инструментах, возвращающих большие наборы данных
  - Инструкции по поддержке синхронизации английской и русской документации

### Изменено

- Обновлены описания всех MCP инструментов с документацией новых полей в ответах
- Улучшен парсинг конфигурации в `src/config.ts` для лучшей читаемости
- Расширен AGENTS.md с более четкими рекомендациями по разработке инструментов и документации
- Улучшено форматирование кода в `src/server.ts` для согласованности

### Изменено

- Обновлён README.md с документацией инструментов для вложений
- Добавлена секция "Important Notes" в README.md для деструктивных операций
- Повышена версия до 0.2.0 (обновление minor версии - новая функциональность)

### Техническое

- Добавлена зависимость `form-data` для загрузки файлов multipart/form-data
- Новые типы в `src/types.ts` для операций с вложениями
- Новые mapper функции в `src/utils/mappers.ts` для преобразования данных вложений
- Новые методы клиента в `src/youtrack-client.ts` для вызовов API вложений
- Новый файл регистрации инструментов `src/tools/attachment-tools.ts`

## [0.1.0] - 2025-10-13

### Добавлено

- Первый релиз YouTrack MCP Server
- Полноценная интеграция с YouTrack через Model Context Protocol
- Инструменты управления задачами (просмотр, детали, комментарии, создание, обновление, назначение)
- Учёт трудозатрат с детальными отчётами
- Поиск по активности пользователей с двумя режимами фильтрации (быстрый и точный)
- Управление статьями базы знаний
- Инструменты управления проектами и пользователями
- Поддержка конфигурации праздников и предпраздничных дней
- Маппинг псевдонимов пользователей для выбора исполнителей
- Конфигурация таймзоны для операций с датами
- Массовые операции для трудозатрат
- Комплексные инструменты отчётности по трудозатратам

[Unreleased]: https://github.com/VitalyOstanin/youtrack-mcp/compare/v0.2.0...HEAD
[0.2.0]: https://github.com/VitalyOstanin/youtrack-mcp/compare/v0.1.0...v0.2.0
[0.1.0]: https://github.com/VitalyOstanin/youtrack-mcp/releases/tag/v0.1.0
